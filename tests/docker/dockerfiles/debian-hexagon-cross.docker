#
# Docker Hexagon cross-compiler target
#
FROM qemu/debian10

RUN DEBIAN_FRONTEND=noninteractive eatmydata \
    apt install -y --no-install-recommends \
        curl \
        xz-utils
RUN DEBIAN_FRONTEND=noninteractive eatmydata \
    apt build-dep -yy --arch-only qemu

RUN curl -#SL https://codelinaro.jfrog.io/artifactory/codelinaro-toolchain-for-hexagon/v2021.09.10/clang+llvm-Sept-2021-cross-hexagon-unknown-linux-musl.tar.xz \
  | tar -xJC /opt

ENV PATH $PATH:/opt/clang+llvm-Sept-2021-cross-hexagon-unknown-linux-musl/x86_64-linux-gnu/bin
ENV DEF_TARGET_LIST hexagon-linux-user
ENV QEMU_CONFIGURE_OPTS --disable-docs --disable-tools --cross-cc-hexagon=hexagon-unknown-linux-musl-clang
